!function(t){var e={};function i(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=5)}([function(t,e){var i=window.innerWidth,r=window.innerHeight;let a=new Phaser.Game(i,r,Phaser.CANVAS,"root");t.exports=a},function(t,e){t.exports={color:{defaultBgTxt:"#faf8ef",defaultBgNum:16447727,defaultTxtTxt:"#776e65",defaultTxtNum:7827045,defaultPanelBgTxt:"#f59563",defaultPanelBgNum:16094563,headerTxt:"#8f7a66",headerNum:9402982,dashBoardBgTxt:"#faf8ef",dashBoardBgNum:16447727,dashPanelBgNum:12299680,dashPanelTitleTxt:"#eee4da",dashPanelContentTxt:"#ffffff",mazeBgNum:15656154,mazeWallNum:12299680,mazePeopleNum:15584353,mazeExitNum:16153695,mazeMaskNum:15656154}}},function(t,e,i){var r=i(11),a=i(12),o=i(13),l=i(14),s=i(15),n=i(16);t.exports={level5:[r,a,o,l],level7:[],level9:[s,n]}},function(t,e,i){var r=i(0),a=i(1);t.exports=function(t,e){const i=r.width;this.group=new Phaser.Group(r);var o=new Phaser.Graphics(r,0,0);o.beginFill(a.color.headerNum),o.drawRect(0,0,i,150),o.endFill(),this.group.add(o);let l=new Phaser.Button(r,25,25,"quit",function(){e()});l.width=100,l.height=100,this.group.add(l),t=new Phaser.Text(r,150,25,t,{fontSize:"100px",fontStyle:"italic",fill:a.color.defaultBgTxt}),this.group.add(t)}},function(t,e,i){var r=i(0),a=i(1);t.exports=function(t,e,i){this.group=new Phaser.Group(r),this.group.inputEnableChildren=!0,this.group.onChildInputUp.add(function(){i()});var o=new Phaser.Graphics(r,0,0);o.beginFill(a.color.defaultTxtNum),o.drawRoundedRect(0,0,e,120,80),o.endFill(),this.group.add(o);var l=new Phaser.Text(r,115,10,t,{fontSize:"80px",fill:"#ffffff"});l.left=(this.group.width-l.width)/2,this.group.add(l)}},function(t,e,i){window.PIXI=null,window.p2=null,window.Phaser=null;var r=i(0),a=i(6),o=i(7),l=i(9),s=i(17),n=i(22);win=i(23),window.onload=function(){r.state.add("preload",a),r.state.add("choseLevel",o),r.state.add("chooseChapter",l),r.state.add("play",s),r.state.add("win",win),r.state.add("lose",n),r.state.start("preload")}},function(t,e,i){var r=i(0),a=i(1);let o=function(){};o.prototype.preload=function(){r.stage.backgroundColor=a.color.defaultBgTxt,r.load.image("quit","./asset/img/quit.png"),r.load.image("win","./asset/img/win.png"),r.load.image("lose","./asset/img/lose.png"),r.load.onLoadComplete.add(function(){})},o.prototype.create=function(){const t=r.width,e=r.height;var i=new Phaser.Text(r,0,.25*e,"记忆之城",{fontSize:"120px",fontWeight:"bold",fill:a.color.defaultTxtTxt});i.font="Microsoft YaHei",i.x=(t-i.width)/2,r.world.add(i);var o=new Phaser.Text(r,0,.85*e,"By David糖",{fontSize:"40px",fill:a.color.defaultTxtTxt});o.font="Microsoft YaHei",o.x=(t-o.width)/2,r.world.add(o);var l=new Phaser.Group(r);l.top=.65*e,l.left=(t-400)/2,l.inputEnableChildren=!0,l.onChildInputUp.add(function(){r.state.start("choseLevel")});var s=new Phaser.Graphics(r,0,0);s.beginFill(a.color.defaultTxtNum),s.drawRoundedRect(0,0,400,120,80),s.endFill(),l.add(s);var n=new Phaser.Text(r,115,10,"开始",{fontSize:"80px",fill:"#ffffff"});l.add(n),r.world.add(l)},t.exports=o},function(t,e,i){var r=i(0),a=i(1),o=i(8);let l=function(){};l.prototype.preload=function(){r.stage.backgroundColor=a.color.defaultBgTxt},l.prototype.create=function(){const t=r.width;var e=new Phaser.Group(r);r.add.world.add(e);var i=new Phaser.Graphics(r,0,0);i.beginFill(a.color.headerNum),i.drawRect(0,0,t,150),i.endFill(),e.add(i);var l=new Phaser.Text(r,50,25,"难度",{fontSize:"80px",fill:a.color.defaultBgTxt});e.add(l);const s=t-200;var n=new o("新手入门",5,s,400).group;n.top=e.y+e.height+50,n.left=100,r.add.world.add(n);var h=new o("键入佳境",7,s,400).group;h.top=n.y+n.height+50,h.left=100,r.add.world.add(h);var p=new o("登峰造极",9,s,400).group;p.top=h.y+h.height+50,p.left=100,r.add.world.add(p)},t.exports=l},function(t,e,i){var r=i(0),a=i(1);t.exports=function(t,e,i,o){this.group=new Phaser.Group(r),this.group.inputEnableChildren=!0;let l=new Phaser.Graphics(r,0,0);l.beginFill(a.color.defaultPanelBgNum),l.drawRoundedRect(0,0,i,o,"20"),l.endFill(),this.group.add(l);let s=new Phaser.Text(r,30,30,t,{fontSize:"60px",fill:"#ffffff"});this.group.add(s);let n=new Phaser.Text(r,0,0,`${e} X ${e}`,{fontSize:"200px",fill:"#ffffff",fontStyle:"italic",fontWeight:"bold"});n.x=i-n.width-30,n.y=o-200-30,this.group.add(n),this.group.onChildInputUp.add(function(){r.state.start("chooseChapter",!0,!1,e)})}},function(t,e,i){var r=i(0),a=i(1),o=i(10),l=i(3),s=i(2);let n=function(){};n.prototype.init=function(t){console.info("chooseChapter level: "+t),this.levelNo=t,this.chapterGroup=new Phaser.Group(r)},n.prototype.preload=function(){r.stage.backgroundColor=a.color.defaultBgTxt},n.prototype.create=function(){const t=r.width;var e=new l(`${this.levelNo} X ${this.levelNo}`,function(){r.state.start("choseLevel")}).group;this.chapterGroup.add(e);var i=new Phaser.Group(r);i.top=e.height,this.chapterGroup.add(i);var a=s["level"+this.levelNo];const n=(t-50)/3-50;for(let t=0;t<a.length;t++){let e=new o(this.levelNo,t,n,n).group;e.top=50*(parseInt(t/3)+1)+parseInt(t/3)*n,e.left=t%3*n+50*(t%3+1),i.add(e)}},t.exports=n},function(t,e,i){var r=i(0),a=i(1);t.exports=function(t,e,i,o){var l=this;this.levelNo=t,this.chapterNo=e,this.group=new Phaser.Group(r),this.group.inputEnableChildren=!0;let s=new Phaser.Graphics(r,0,0);s.beginFill(a.color.defaultPanelBgNum),s.drawRoundedRect(0,0,i,o,20),s.endFill(),this.group.add(s);let n=new Phaser.Text(r,0,25,e+1+"",{fontSize:"80px",fill:a.color.defaultBgTxt});n.x=(s.width-n.width)/2,this.group.add(n),this.group.onChildInputUp.add(function(){r.state.start("play",!0,!1,{level:l.levelNo,chapter:l.chapterNo})})}},function(t,e){t.exports={timeLimit:30,stepLimit:20,visSize:5,entryX:2,entryY:2,exitX:2,exitY:0,pathData:[[{t:!0,l:!0},{t:!0,l:!0},{t:!1,l:!0},{t:!1,l:!0},{t:!1,l:!0}],[{t:!0,l:!0},{t:!1,l:!1},{t:!0,l:!0},{t:!1,l:!0},{t:!0,l:!1}],[{t:!0,l:!1},{t:!1,l:!0},{t:!1,l:!1},{t:!0,l:!0},{t:!0,l:!1}],[{t:!0,l:!0},{t:!0,l:!1},{t:!0,l:!1},{t:!1,l:!0},{t:!1,l:!1}],[{t:!0,l:!1},{t:!1,l:!1},{t:!1,l:!0},{t:!1,l:!0},{t:!1,l:!0}]]}},function(t,e){t.exports={timeLimit:30,stepLimit:20,visSize:5,entryX:2,entryY:2,exitX:2,exitY:0,pathData:[[{t:!0,l:!0},{t:!0,l:!0},{t:!1,l:!0},{t:!1,l:!0},{t:!1,l:!0}],[{t:!0,l:!0},{t:!1,l:!1},{t:!0,l:!0},{t:!1,l:!0},{t:!0,l:!1}],[{t:!0,l:!1},{t:!0,l:!0},{t:!1,l:!1},{t:!0,l:!0},{t:!0,l:!1}],[{t:!0,l:!0},{t:!0,l:!1},{t:!0,l:!1},{t:!1,l:!0},{t:!1,l:!1}],[{t:!0,l:!1},{t:!1,l:!1},{t:!1,l:!0},{t:!1,l:!0},{t:!1,l:!0}]]}},function(t,e){t.exports={timeLimit:30,stepLimit:20,visSize:3,entryX:2,entryY:2,exitX:2,exitY:0,pathData:[[{t:!0,l:!0},{t:!0,l:!0},{t:!1,l:!0},{t:!1,l:!0},{t:!1,l:!0}],[{t:!0,l:!0},{t:!1,l:!1},{t:!0,l:!0},{t:!1,l:!0},{t:!0,l:!1}],[{t:!0,l:!1},{t:!0,l:!0},{t:!1,l:!1},{t:!0,l:!0},{t:!0,l:!1}],[{t:!0,l:!0},{t:!0,l:!1},{t:!0,l:!1},{t:!1,l:!0},{t:!1,l:!1}],[{t:!0,l:!1},{t:!1,l:!1},{t:!1,l:!0},{t:!1,l:!0},{t:!1,l:!0}]]}},function(t,e){t.exports={timeLimit:30,stepLimit:20,visSize:3,entryX:4,entryY:4,exitX:2,exitY:0,pathData:[[{t:!0,l:!0},{t:!0,l:!0},{t:!1,l:!0},{t:!1,l:!0},{t:!1,l:!0}],[{t:!0,l:!0},{t:!1,l:!1},{t:!0,l:!0},{t:!1,l:!0},{t:!0,l:!1}],[{t:!0,l:!1},{t:!0,l:!0},{t:!1,l:!1},{t:!0,l:!0},{t:!0,l:!1}],[{t:!0,l:!0},{t:!0,l:!1},{t:!0,l:!1},{t:!1,l:!0},{t:!1,l:!1}],[{t:!0,l:!1},{t:!1,l:!1},{t:!1,l:!0},{t:!1,l:!0},{t:!1,l:!0}]]}},function(t,e){t.exports={timeLimit:100,stepLimit:30,visSize:3,entryX:4,entryY:4,exitX:4,exitY:0,pathData:[[{t:!0,r:!1,b:!0,l:!0},{t:!0,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!1,l:!0},{t:!1,r:!0,b:!0,l:!0}],[{t:!0,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!1},{t:!0,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!1},{t:!1,r:!1,b:!0,l:!0}],[{t:!0,r:!1,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!1,l:!1},{t:!1,r:!1,b:!0,l:!1},{t:!0,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!0,l:!1}],[{t:!0,r:!0,b:!0,l:!1},{t:!0,r:!1,b:!1,l:!0},{t:!1,r:!0,b:!0,l:!1},{t:!0,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!0,l:!1},{t:!0,r:!0,b:!0,l:!1},{t:!0,r:!1,b:!0,l:!1},{t:!0,r:!0,b:!1,l:!1},{t:!1,r:!1,b:!0,l:!1}],[{t:!1,r:!1,b:!1,l:!0},{t:!1,r:!0,b:!0,l:!1},{t:!0,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!1}],[{t:!0,r:!1,b:!0,l:!1},{t:!0,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!0,l:!1}],[{t:!0,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!0,l:!1},{t:!0,r:!1,b:!0,l:!1},{t:!0,r:!0,b:!0,l:!1},{t:!0,r:!1,b:!0,l:!1}],[{t:!0,r:!1,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!1,l:!0},{t:!1,r:!0,b:!0,l:!0},{t:!0,r:!0,b:!0,l:!1},{t:!0,r:!1,b:!1,l:!1},{t:!1,r:!1,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!0,l:!1}],[{t:!0,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!0,l:!0},{t:!0,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!0,l:!1},{t:!0,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!0,l:!0}]]}},function(t,e){t.exports={timeLimit:100,stepLimit:30,visSize:3,entryX:8,entryY:8,exitX:4,exitY:0,pathData:[[{t:!0,r:!1,b:!0,l:!0},{t:!0,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!1,l:!0},{t:!1,r:!0,b:!0,l:!0}],[{t:!0,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!1},{t:!0,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!1},{t:!1,r:!1,b:!0,l:!0}],[{t:!0,r:!1,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!1,l:!1},{t:!1,r:!1,b:!0,l:!1},{t:!0,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!0,l:!1}],[{t:!0,r:!0,b:!0,l:!1},{t:!0,r:!1,b:!1,l:!0},{t:!1,r:!0,b:!0,l:!1},{t:!0,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!0,l:!1},{t:!0,r:!0,b:!0,l:!1},{t:!0,r:!1,b:!0,l:!1},{t:!0,r:!0,b:!1,l:!1},{t:!1,r:!1,b:!0,l:!1}],[{t:!1,r:!1,b:!1,l:!0},{t:!1,r:!0,b:!0,l:!1},{t:!0,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!1}],[{t:!0,r:!1,b:!0,l:!1},{t:!0,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!0,l:!1}],[{t:!0,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!0,l:!0},{t:!0,r:!1,b:!0,l:!1},{t:!0,r:!1,b:!0,l:!1},{t:!0,r:!0,b:!0,l:!1},{t:!0,r:!1,b:!0,l:!1}],[{t:!0,r:!1,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!1,b:!1,l:!0},{t:!1,r:!0,b:!0,l:!0},{t:!0,r:!0,b:!0,l:!1},{t:!0,r:!1,b:!1,l:!1},{t:!1,r:!1,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!0,l:!1}],[{t:!0,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!0,l:!0},{t:!0,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!0,l:!1},{t:!0,r:!0,b:!1,l:!1},{t:!1,r:!0,b:!1,l:!0},{t:!1,r:!0,b:!0,l:!0}]]}},function(t,e,i){var r=i(0),a=i(1),o=i(3),l=i(18),s=i(2),n=i(21);let h=function(){};h.prototype.init=function({level:t,chapter:e}){console.info(`play level: ${t} chapter: ${e}`),this.levelNo=t,this.chapterNo=e,this.chapterGroup=new Phaser.Group(r),this.mazeM=s["level"+t][e]},h.prototype.preload=function(){r.stage.backgroundColor=a.color.defaultBgTxt},h.prototype.create=function(){var t=this;this.playGroup=new Phaser.Group(r);const e=r.width;let i=new o(`${this.levelNo} X ${this.levelNo} X ${this.chapterNo+1}`,function(){r.state.start("chooseChapter",!0,!1,t.levelNo)}).group;this.playGroup.add(i);let a=new n(this.mazeM,e);a.group.top=i.height,a.group.left=0,this.playGroup.add(a.group);let s=new l(this.levelNo,this.chapterNo,a).group;s.top=i.height+a.group.height,s.left=0,this.playGroup.add(s)},t.exports=h},function(t,e,i){var r=i(0),a=i(1),o=i(19),l=(i(2),i(20));function s(t,e,i){this.group=new Phaser.Group(r),this.screenWidth=r.width,this.mazeM=new o(t,e,this.screenWidth,i),this.init()}s.prototype.init=function(){this.initMaze(()=>{this.initMask(()=>{this.initControl()})})},s.prototype.initMaze=function(t){this.mazeGroup=new Phaser.Group(r),this.group.add(this.mazeGroup),this.drawMaze(t)},s.prototype.initMask=function(t){this.maskGroup=new Phaser.Group(r),this.group.add(this.maskGroup),this.drawMask(t)},s.prototype.initControl=function(){this.controlGroup=new Phaser.Group(r),this.controlGroup.inputEnableChildren=!0,this.group.add(this.controlGroup),this.drawControl()},s.prototype.drawMaze=function(t){this.maze=new Phaser.Graphics(r,0,0),this.maze.beginFill(a.color.mazeBgNum),this.maze.drawRect(0,0,this.mazeM.mazeSize,this.mazeM.mazeSize),this.maze.endFill();for(let t=0;t<this.mazeM.mazeLevel;t++)for(let e=0;e<this.mazeM.mazeLevel;e++)this.dramMazeUnit(t,e);this.mazeImg=new Phaser.Image(r,0,0,this.maze.generateTexture());const e={x:this.mazeM.borderWidth+this.mazeM.unitSize*(this.mazeM.exitCo.x+.5)-this.screenWidth/2,y:this.mazeM.borderWidth+this.mazeM.unitSize*(this.mazeM.exitCo.y+.5)-this.screenWidth/2},i={x:this.mazeM.borderWidth+this.mazeM.unitSize*(this.mazeM.currentCo.x+.5)-this.screenWidth/2,y:this.mazeM.borderWidth+this.mazeM.unitSize*(this.mazeM.currentCo.y+.5)-this.screenWidth/2};this.mazeImg.cropRect=new Phaser.Rectangle(e.x,e.y,this.mazeM.screenWidth,this.mazeM.screenWidth),this.mazeImg.updateCrop(),this.mazeGroup.add(this.mazeImg);let o=new Phaser.Tween(this.mazeImg.cropRect,r,r.tweens),l={x:i.x,y:i.y};o.to(l,500*this.mazeM.mazeLevel,Phaser.Easing.Quadratic.InOut);let s=r.time.events.loop(0,()=>{this.mazeImg.updateCrop()});o.onComplete.add(()=>{this.mazeImg.updateCrop(),r.time.events.remove(s),t()}),o.start()},s.prototype.getUnitBaseCo=function(t,e){var i=this.mazeM.borderWidth-Math.floor(this.mazeM.wallWidth/2),r=i;return{x:i+t*this.mazeM.unitSize,y:r+e*this.mazeM.unitSize}},s.prototype.getUnitCenterCo=function(t,e){var i=Math.floor(this.mazeM.borderWidth+this.mazeM.unitSize/2),r=i;return{x:i+t*this.mazeM.unitSize,y:r+e*this.mazeM.unitSize}},s.prototype.dramMazeUnit=function(t,e){const i=this.getUnitBaseCo(t,e),r=this.getUnitCenterCo(t,e);this.mazeM.hasWall(t,e,"l")&&(this.maze.beginFill(a.color.mazeWallNum),this.maze.drawRect(i.x,i.y,this.mazeM.wallWidth,this.mazeM.unitSize+this.mazeM.wallWidth),this.maze.endFill()),this.mazeM.hasWall(t,e,"t")&&(this.maze.beginFill(a.color.mazeWallNum),this.maze.drawRect(i.x,i.y,this.mazeM.unitSize+this.mazeM.wallWidth,this.mazeM.wallWidth),this.maze.endFill()),t===this.mazeM.mazeLevel-1&&this.mazeM.hasWall(t,e,"r")&&(this.maze.beginFill(a.color.mazeWallNum),this.maze.drawRect(i.x+this.mazeM.unitSize,i.y,this.mazeM.wallWidth,this.mazeM.unitSize+this.mazeM.wallWidth),this.maze.endFill()),e===this.mazeM.mazeLevel-1&&this.mazeM.hasWall(t,e,"b")&&(this.maze.beginFill(a.color.mazeWallNum),this.maze.drawRect(i.x,i.y+this.mazeM.unitSize,this.mazeM.unitSize+this.mazeM.wallWidth,this.mazeM.wallWidth),this.maze.endFill()),this.mazeM.isExit(t,e)&&(this.maze.beginFill(a.color.mazeExitNum),this.maze.drawCircle(r.x,r.y,this.mazeM.pathWidth/2),this.maze.endFill())},s.prototype.moveMaze=function(t){const e=this;if(!this.mazeM.validateMove(t))return;let i=new Phaser.Tween(this.mazeImg.cropRect,r,r.tweens),a={x:this.mazeImg.cropRect.x,y:this.mazeImg.cropRect.y};"t"===t?a.y-=this.mazeM.unitSize:"b"===t?a.y+=this.mazeM.unitSize:"l"===t?a.x-=this.mazeM.unitSize:"r"===t&&(a.x+=this.mazeM.unitSize),i.to(a,500,Phaser.Easing.Quadratic.InOut);let o=r.time.events.loop(0,function(){e.mazeImg.updateCrop()});i.onComplete.add(function(){e.mazeImg.updateCrop(),r.time.events.remove(o),e.mazeM.move(t),e.showArrow()}),i.start()},s.prototype.drawControl=function(){this.drawPeople(),this.drawArrow(),this.showArrow()},s.prototype.drawPeople=function(){this.people=new Phaser.Graphics(r,0,0);const t=Math.floor(this.mazeM.screenWidth/2);this.people.beginFill(a.color.mazePeopleNum),this.people.drawCircle(t,t,this.mazeM.pathWidth/2),this.people.endFill(),this.controlGroup.add(this.people)},s.prototype.drawArrow=function(){const t=this,e=Math.floor(this.mazeM.screenWidth/2),i=this.mazeM.unitSize/3;this.arraws={},this.arraws.upArraw=l.drawUpArrow({x:e,y:e-this.mazeM.unitSize},i),this.arraws.upArraw.inputEnabled=!0,this.arraws.upArraw.events.onInputUp.add(function(){t.hideArrow(),t.moveMaze("t")}),this.arraws.rightArraw=l.drawRightArrow({x:e+this.mazeM.unitSize,y:e},i),this.arraws.rightArraw.inputEnabled=!0,this.arraws.rightArraw.events.onInputUp.add(function(){t.hideArrow(),t.moveMaze("r")}),this.arraws.bottomArraw=l.drawBottomArrow({x:e,y:e+this.mazeM.unitSize},i),this.arraws.bottomArraw.inputEnabled=!0,this.arraws.bottomArraw.events.onInputUp.add(function(){t.hideArrow(),t.moveMaze("b")}),this.arraws.leftArraw=l.drawLeftArrow({x:e-this.mazeM.unitSize,y:e},i),this.arraws.leftArraw.inputEnabled=!0,this.arraws.leftArraw.events.onInputUp.add(function(){t.hideArrow(),t.moveMaze("l")})},s.prototype.hideArrow=function(){this.controlGroup.remove(this.arraws.upArraw),this.controlGroup.remove(this.arraws.rightArraw),this.controlGroup.remove(this.arraws.bottomArraw),this.controlGroup.remove(this.arraws.leftArraw)},s.prototype.showArrow=function(){const t=this.mazeM.currentCo;this.mazeM.hasWall(t.x,t.y,"t")||0===t.y||this.controlGroup.add(this.arraws.upArraw),this.mazeM.hasWall(t.x,t.y,"r")||t.x===this.mazeM.mazeLevel-1||this.controlGroup.add(this.arraws.rightArraw),this.mazeM.hasWall(t.x,t.y,"b")||t.y===this.mazeM.mazeLevel-1||this.controlGroup.add(this.arraws.bottomArraw),this.mazeM.hasWall(t.x,t.y,"l")||0===t.x||this.controlGroup.add(this.arraws.leftArraw)},s.prototype.drawMask=function(t){if(5===this.mazeM.visSize)return void t();let e=new Phaser.Graphics(r,0,0),i=this.mazeM.unitSize;e.lineStyle(i,a.color.mazeMaskNum),e.drawRect(i/2,i/2,this.screenWidth-i,this.screenWidth-i),e.endFill(),this.maskGroup.alpha=0,this.maskGroup.add(e);let o=new Phaser.Tween(this.maskGroup,r,r.tweens);o.to({alpha:1},800,Phaser.Easing.Quadratic.InOut),o.onComplete.add(function(){t()}),o.start()},t.exports=s},function(t,e,i){var r=i(0),a=i(2);function o(t,e,i,r){this.levelNo=t,this.chapterNo=e,this.mazeData=a["level"+t][e],this.screenWidth=i,this.dashBoard=r,this.init()}o.prototype.init=function(){this.currentCo={x:this.mazeData.entryX,y:this.mazeData.entryY},this.exitCo={x:this.mazeData.exitX,y:this.mazeData.exitY},this.mazeLevel=this.mazeData.pathData.length,this.unitSize=Math.ceil(this.screenWidth/31*6),this.borderWidth=3*this.unitSize,this.wallWidth=Math.floor(this.screenWidth/30),this.pathWidth=this.unitSize-this.wallWidth,this.mazeSize=2*this.borderWidth+this.unitSize*this.mazeLevel,this.startTime=null,this.timeLimitTimer=r.time.create(!1),this.stepCount=0,this.initProperty()},o.prototype.initProperty=function(){Object.defineProperty(this,"visSize",{get:function(){return this.mazeData.visSize}})},o.prototype.validateCo=function(t,e){return this.mazeData.pathData[t]?!!this.mazeData.pathData[t][e]||(console.error("Y坐标溢出"),!1):(console.error("X坐标溢出"),!1)},o.prototype.validateMove=function(t){const e=this.getMoveCo(t);return this.validateCo(e.x,e.y)},o.prototype.getMoveCo=function(t){const e={x:this.currentCo.x,y:this.currentCo.y};return"t"===t?e.y--:"r"===t?e.x++:"b"===t?e.y++:"l"===t&&e.x--,e},o.prototype.move=function(t){"t"===t?this.currentCo.y--:"r"===t?this.currentCo.x++:"b"===t?this.currentCo.y++:"l"===t&&this.currentCo.x--,null===this.startTime&&(this.startTime=Date.now(),this.timeLimitTimer.loop(1e3,()=>{let t=Date.now(),e=Math.floor((t-this.startTime)/1e3),i=this.mazeData.timeLimit-e;this.dashBoard.setTimeLimit(i),i<=0&&this.gameOver()}),this.timeLimitTimer.start()),this.stepCount++;let e=this.mazeData.stepLimit-this.stepCount;this.dashBoard.setStepLimit(e),(e<=0||this.isExit(this.currentCo.x,this.currentCo.y))&&this.gameOver()},o.prototype.isExit=function(t,e){return t===this.mazeData.exitX&&e===this.mazeData.exitY},o.prototype.hasWall=function(t,e,i){if(this.validateCo(t,e)){if("l"===i){if(0===t)return!this.isExit(t,e);return this.mazeData.pathData[t][e].l}if("t"===i){if(0===e)return!this.isExit(t,e);return this.mazeData.pathData[t][e].t}if("r"===i){if(t===this.mazeLevel-1)return!this.isExit(t,e);return this.mazeData.pathData[t+1][e].l}if("b"===i){if(e===this.mazeLevel-1)return!this.isExit(t,e);return this.mazeData.pathData[t][e+1].t}}},o.prototype.gameOver=function(){this.timeLimitTimer.stop(),this.isExit(this.currentCo.x,this.currentCo.y)?r.state.start("win",!0,!1,{level:this.levelNo,chapter:this.chapterNo}):r.state.start("lose",!0,!1,{level:this.levelNo,chapter:this.chapterNo})},t.exports=o},function(t,e,i){var r=i(0);t.exports={drawUpArrow:function(t,e){let i=new Phaser.Graphics(r,0,0);return i.beginFill(5025616),i.drawPolygon([new Phaser.Point(t.x,t.y-e),new Phaser.Point(t.x-e,t.y+e),new Phaser.Point(t.x+e,t.y+e)]),i.endFill(),i},drawRightArrow:function(t,e){let i=new Phaser.Graphics(r,0,0);return i.beginFill(5025616),i.drawPolygon([new Phaser.Point(t.x+e,t.y),new Phaser.Point(t.x-e,t.y-e),new Phaser.Point(t.x-e,t.y+e)]),i.endFill(),i},drawBottomArrow:function(t,e){let i=new Phaser.Graphics(r,0,0);return i.beginFill(5025616),i.drawPolygon([new Phaser.Point(t.x,t.y+e),new Phaser.Point(t.x-e,t.y-e),new Phaser.Point(t.x+e,t.y-e)]),i.endFill(),i},drawLeftArrow:function(t,e){let i=new Phaser.Graphics(r,0,0);return i.beginFill(5025616),i.drawPolygon([new Phaser.Point(t.x-e,t.y),new Phaser.Point(t.x+e,t.y-e),new Phaser.Point(t.x+e,t.y+e)]),i.endFill(),i}}},function(t,e,i){var r=i(0),a=i(1);function o(t,e){this.group=new Phaser.Group(r),this.group.inputEnableChildren=!0,this.margin=10,this.boardW=(e-6*this.margin)/5,this.boardH=3*this.boardW/4,this.bgH=2*this.margin+this.boardH;let i=new Phaser.Graphics(r,0,0);i.beginFill(a.color.dashBoardBgNum),i.drawRect(0,0,e,this.bgH),i.endFill(),this.group.add(i),this.initTimeLimit(t.timeLimit),this.initStepLimit(t.stepLimit)}o.prototype.initTimeLimit=function(t){this.timeBoard=new Phaser.Group(r),this.timeBoard.top=this.margin,this.timeBoard.left=this.margin,this.group.add(this.timeBoard);let e=new Phaser.Graphics(r,0,0);e.beginFill(a.color.dashPanelBgNum),e.drawRoundedRect(0,0,this.boardW,this.boardH,20),e.endFill(),this.timeBoard.add(e);let i=new Phaser.Text(r,0,0,"Time",{fontSize:"40px",fill:a.color.dashPanelTitleTxt});i.top=20,i.left=(this.boardW-i.width)/2,this.timeBoard.add(i),this.timeLimitTxt=new Phaser.Text(r,0,0,t+"",{fontSize:"60px",fill:a.color.dashPanelContentTxt}),this.timeLimitTxt.top=60,this.timeLimitTxt.left=(this.boardW-this.timeLimitTxt.width)/2,this.timeBoard.add(this.timeLimitTxt)},o.prototype.setTimeLimit=function(t){this.timeLimitTxt.text=t+"",this.timeLimitTxt.left=(this.boardW-this.timeLimitTxt.width)/2},o.prototype.initStepLimit=function(t){this.stepBoard=new Phaser.Group(r),this.stepBoard.top=this.margin,this.stepBoard.left=2*this.margin+this.boardW,this.group.add(this.stepBoard);let e=new Phaser.Graphics(r,0,0);e.beginFill(a.color.dashPanelBgNum),e.drawRoundedRect(0,0,this.boardW,this.boardH,20),e.endFill(),this.stepBoard.add(e);let i=new Phaser.Text(r,0,0,"Step",{fontSize:"40px",fill:a.color.dashPanelTitleTxt});i.top=20,i.left=(this.boardW-i.width)/2,this.stepBoard.add(i),this.stepLimitTxt=new Phaser.Text(r,0,0,t+"",{fontSize:"60px",fill:a.color.dashPanelContentTxt}),this.stepLimitTxt.top=60,this.stepLimitTxt.left=(this.boardW-this.timeLimitTxt.width)/2,this.stepBoard.add(this.stepLimitTxt)},o.prototype.setStepLimit=function(t){this.stepLimitTxt.text=t+"",this.stepLimitTxt.left=(this.boardW-this.stepLimitTxt.width)/2},t.exports=o},function(t,e,i){var r=i(0),a=i(1),o=i(4),l=i(3);let s=function(){};s.prototype.init=function({level:t,chapter:e,time:i,step:a}){console.info(`win level: ${t} chapter: ${e}`),this.levelNo=t,this.chapterNo=e,this.winGroup=new Phaser.Group(r)},s.prototype.preload=function(){r.stage.backgroundColor=a.color.defaultBgTxt},s.prototype.create=function(){let t=this;const e=r.width;var i=new l(`${this.levelNo} X ${this.levelNo} X ${this.chapterNo+1}`,()=>{r.state.start("chooseChapter",!0,!1,this.levelNo)}).group;this.winGroup.add(i);let a=new Phaser.Image(r,0,0,"lose");a.width=500,a.height=500,a.top=.2*r.height,a.left=(e-a.width)/2,this.winGroup.add(a);var s=new o("重玩",400,function(){r.state.start("play",!0,!1,{level:t.levelNo,chapter:t.chapterNo})}).group;s.top=.65*r.height,s.left=(e-s.width)/2,this.winGroup.add(s)},t.exports=s},function(t,e,i){var r=i(0),a=i(1),o=i(3),l=i(4),s=i(2);let n=function(){};n.prototype.init=function({level:t,chapter:e,time:i,step:a}){console.info(`win level: ${t} chapter: ${e}`),this.levelNo=t,this.chapterNo=e,this.winGroup=new Phaser.Group(r)},n.prototype.preload=function(){r.stage.backgroundColor=a.color.defaultBgTxt},n.prototype.create=function(){let t=this;const e=r.width;var i=new o(`${this.levelNo} X ${this.levelNo} X ${this.chapterNo+1}`,()=>{r.state.start("chooseChapter",!0,!1,this.levelNo)}).group;this.winGroup.add(i);let a=new Phaser.Image(r,0,0,"win");a.width=500,a.height=500,a.top=.2*r.height,a.left=(e-a.width)/2,this.winGroup.add(a);var n=new l("重玩",400,function(){r.state.start("play",!0,!1,{level:t.levelNo,chapter:t.chapterNo})}).group;if(n.top=.65*r.height,n.left=(e-n.width)/2,this.winGroup.add(n),s["level"+t.levelNo].length-1>t.chapterNo){var h=new l("下一关",400,function(){r.state.start("play",!0,!1,{level:t.levelNo,chapter:t.chapterNo+1})}).group;h.top=.75*r.height,h.left=(e-h.width)/2,this.winGroup.add(h)}},t.exports=n}]);